<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>JSON Editor</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <style>
    body { background: #f2f4f7; padding: 25px; }
    .card { border-radius: 14px; }
    textarea { min-height: 200px; border-radius: 10px; background:#fff; }
    .section-title { font-size: 22px; font-weight: 600; margin-bottom: 15px; }
  </style>
</head>
<body>

  <div class="container-lg" style="max-width:900px;">

    <div class="text-center mb-4">
      <h1 class="fw-bold mb-1">JSON Editor</h1>
    </div>

    <div class="card shadow-sm p-4 mb-4">
      <div class="section-title">Room Controls</div>
      <div class="row g-3 mb-3">
        <div class="col-12 col-md-3"><button id="createRoom" class="btn btn-primary w-100">Create Room</button></div>
        <div class="col-12 col-md-3"><button id="joinRoomBtn" class="btn btn-success w-100">Join Room</button></div>
        <div class="col-12 col-md-4"><input id="roomInput" type="text" class="form-control" placeholder="Paste roomId"></div>
        <div class="col-12 col-md-2"><button id="copyRoom" class="btn btn-secondary w-100">Copy</button></div>
      </div>
      <div class="d-flex justify-content-between text-muted small">
        <div><strong>Room:</strong> <span id="connectedRoom" class="text-dark">None</span></div>
        <div><strong>Client:</strong> <span id="clientId" class="text-dark">-</span></div>
      </div>
    </div>

    <div class="card shadow-sm p-4 mb-4">
      <div class="section-title">Live JSON Document</div>
      <textarea id="doc" class="form-control" readonly></textarea>
      <button id="downloadJson" class="btn btn-outline-dark mt-3 w-100">Download JSON</button>
    </div>

    <div class="card shadow-sm p-4 mb-4">
      <div class="section-title">Modify JSON</div>

      <div class="mb-3">
        <label class="form-label">JSON Path</label>
        <input id="pathInput" class="form-control" placeholder="user.profile.age">
      </div>

      <div class="mb-3">
        <label class="form-label">Value</label>
        <input id="valueInput" class="form-control" placeholder='"sujal" or 25 or {"city":"surat"}'>
      </div>

      <div class="row g-3">
        <div class="col-md-6">
          <label class="form-label">Value Type</label>
          <select id="typeInput" class="form-select">
            <option value="string">String</option>
            <option value="number">Number</option>
            <option value="boolean">Boolean</option>
            <option value="json">JSON Object</option>
          </select>
        </div>

        <div class="col-md-6">
          <label class="form-label">Delete Key</label>
          <div class="input-group">
            <input id="deleteKeyInput" class="form-control" placeholder="user.profile.age">
            <button id="deleteKeyBtn" class="btn btn-danger">Delete</button>
          </div>
        </div>
      </div>

      <button class="btn btn-primary mt-3 w-100" onclick="generatePatch()">Generate Preview</button>
    </div>

    <div class="card shadow-sm p-4 mb-5">
      <div class="section-title">JSON Preview</div>
      <textarea id="edit" class="form-control" style="min-height:150px;">{
  "path": ["name"],
  "value": "sujal"
}</textarea>
      <button id="sendPatch" class="btn btn-dark mt-3 w-100">Send Update</button>
    </div>

  </div>

  <div id="toastArea" class="toast-container position-fixed bottom-0 end-0 p-3"></div>

  <script type="module" src="client.js"></script>
</body>
</html>